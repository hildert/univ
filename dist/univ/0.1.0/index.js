define("univ/0.1.0/index",["moment/2.6.0/moment","events/1.0.1/events"],function(e,t,n){function r(e,t){return Object.prototype.toString.call(e)==="[object "+t+"]"}function i(e){return r(e,"String")}function a(e){return r(e,"Boolean")}function o(e){return r(e,"Array")}function u(e){return!isNaN(e)&&r(e,"Number")}function d(e){return r(e,"RegExp")}function m(e){return r(e,"Function")}function c(e){return null!==e&&r(e,"Object")}function s(e,t){for(var n in e)e.hasOwnProperty(n)&&t.call(e,n,e[n])}function l(e,t){var n=!0,r=Array.prototype.slice.call(arguments,0).slice(1);if(o(t)){for(var i=0,a=t.length;a>i;i++)r[0]=t[i],n=n&&e.apply(null,r);return n}return e.apply(null,r)}function f(){for(var e,t={},n=0,r=arguments.length;r>n;n++)if(e=arguments[n],c(e))for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function p(e,t){return i(e)&&0===e.indexOf(t)}function v(e,t){return i(e)&&-1!==e.indexOf(t,e.length-t.length)}function h(e,t){if(o(t)){if(!x(1,t))return!a(e)||!e}else if("undefined"==typeof t||null===t||""===t)return!a(e)||!e}function g(e){return/^[+-]?\d+(?:[eE][+-]?\d+)?$/.test(e)||/^[+-]?(?:\d+)?\.\d+(?:[eE][+-]?\d+)?$/.test(e)}function y(e,t){return isNaN(t)||Number(e)>=Number(t)}function w(e,t){return isNaN(t)||Number(e)<=Number(t)}function x(e,t){if(!u(e))return!0;if(!o(t)||t.length<e)return!1;for(var n=0,r=0,i=t.length;i>r;r++)"undefined"!=typeof t[r]&&null!==t[r]&&""!==t[r]&&n++;return n>=e}function _(e,t){if(!u(e))return!0;if(!o(t))return!1;for(var n=0,r=0,i=t.length;i>r;r++)"undefined"!=typeof t[r]&&null!==t[r]&&""!==t[r]&&n++;return e>=n}function b(e,t){return!u(e)||t.length>=e}function k(e,t){return!u(e)||t.length<=e}function E(e){return at.test(e)&&tt(e).isValid()}function T(e,t,n){return t?E(t)?tt(e)>=tt(t):(n._evt.emit("error",new TypeError("[type=month][min="+t+"] is invalid month.")),!0):!0}function $(e,t,n){return t?E(t)?tt(e)<=tt(t):(n._evt.emit("error",new TypeError("[type=month][max="+t+"] is invalid month.")),!0):!0}function N(e){return ot.test(e)&&tt("2014-01-01 "+e).isValid()}function j(e,t,n){if(!t)return!0;if(!N(t))return n._evt.emit("error",new TypeError("[type=time][min="+t+"] is invalid time.")),!0;var r="2014-01-01T";return tt(r+e)>=tt(r+t)}function O(e,t,n){if(!t)return!0;if(!N(t))return n._evt.emit("error",new TypeError("[type=time][max="+t+"] is invalid time.")),!0;var r="2014-01-01T";return tt(r+e)<=tt(r+t)}function z(e){return ut.test(e)&&tt(e).isValid()}function M(e,t,n){return t?z(t)?tt(e)>=tt(t):(n._evt.emit("error",new TypeError("[type=date][min="+t+"] is invalid date.")),!0):!0}function V(e,t,n){return t?z(t)?tt(e)<=tt(t):(n._evt.emit("error",new TypeError("[type=date][max="+t+"] is invalid date.")),!0):!0}function A(e){return dt.test(e)&&tt(e).isValid()}function L(e,t,n){return t?A(t)?tt(e)>=tt(t):(n._evt.emit("error",new TypeError("[type=datetime][min="+t+"] is invalid datetime.")),!0):!0}function D(e,t,n){return t?A(t)?tt(e)<=tt(t):(n._evt.emit("error",new TypeError("[type=datetime][max="+t+"] is invalid datetime.")),!0):!0}function P(e){return mt.test(e)&&tt(e).isValid()}function F(e,t,n){return t?P(t)?tt(e)>=tt(t):(n._evt.emit("error",new TypeError("[type=datetime-local][min="+t+"] is invalid datetime.")),!0):!0}function R(e,t,n){return t?P(t)?tt(e)<=tt(t):(n._evt.emit("error",new TypeError("[type=datetime-local][max="+t+"] is invalid datetime.")),!0):!0}function S(e){return ct.test(e)&&tt(e).isValid()}function U(e,t,n){return t?S(t)?tt(e)>=tt(t):(n._evt.emit("error",new TypeError("[type=week][min="+t+"] is invalid week.")),!0):!0}function W(e,t,n){return t?S(t)?tt(e)<=tt(t):(n._evt.emit("error",new TypeError("[type=week][max="+t+"] is invalid week.")),!0):!0}function Z(e){return st.test(e)}function q(e){return lt.test(e)}function B(e){return ft.test(e)}function C(e){return pt.test(e)}function I(e){return vt.test(e)}function G(e,t,n){if(!d(e)){if(!i(e))return!0;try{e=new RegExp(e)}catch(r){return n._evt.emit("error",r),!0}}return e.test(t)}function H(e,t,n){for(var r=!0,i=0,a=t.length;a>i;i++)r=r&&G(e,t[i],n);return r}function J(e,t,n,r){if(!m(e))return!0;var i=f(rt,{data:function(e){return n[e]}}),a=e.call(i,t,r);return"undefined"!=typeof a?a:void 0}function K(e){var t=e.split(".").slice(-1);return ht.hasOwnProperty(t)?ht[t]:void 0}function Q(e,t){if(!o(t)||!e||!e.name)return!0;for(var n=0,r=t.length;r>n;n++){if(e.type||(e.type=K(e.name)),t[n]===e.type)return!0;if(v(t[n],"/*")&&p(e.type,t[n].replace(/\*$/,"")))return!0}return!1}function X(e,t){return u(t)&&u(e.size)?e.size>=t:!0}function Y(e,t){return u(t)&&u(e.size)?e.size<=t:!0}function et(e,t,n,r,i){var a=!0,u={customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,typeMismatch:!1,valueMissing:!1,badInput:!1,valid:!0},d=h(t.required,n);if("undefined"!=typeof d)return d;switch(a=o(n)?a&&x(t.minlength,n)&&_(t.maxlength,n)&&H(t.pattern,n,i):a&&b(t.minlength,n)&&k(t.maxlength,n)&&G(t.pattern,n,i),t.type){case it.number:case it.range:a=a&&l(g,n)&&l(y,n,t.min)&&l(w,n,t.max);break;case it.date:a=a&&l(z,n)&&l(M,n,t.min,i)&&l(V,n,t.max,i);break;case it.datetime:a=a&&l(A,n)&&l(L,n,t.min,i)&&l(D,n,t.max,i);break;case it["datetime-local"]:a=a&&l(P,n)&&l(F,n,t.min,i)&&l(R,n,t.max,i);break;case it.time:a=a&&l(N,n)&&l(j,n,t.min,i)&&l(O,n,t.max,i);break;case it.week:a=a&&l(S,n)&&l(U,n,t.min,i)&&l(W,n,t.max,i);break;case it.month:a=a&&l(E,n)&&l(T,n,t.min,i)&&l($,n,t.max,i);break;case it.url:a=a&&l(Z,n);break;case it.email:a=a&&l(q,n);break;case it.tel:a=a&&l(C,n);break;case it.color:a=a&&l(I,n);break;case it.file:a=a&&l(Q,n,t.accept)&&l(X,n,t.min)&&l(Y,n,t.max)}var m=J(t.custom,n,r,function(t){i._evt.emit(t?"valid":"invalid",e,n,u),0===--i._pending&&(i._evt.emit("complete",i._certified&&t),i._certified=!0)});return i._certified=a,"undefined"!=typeof m?(a=a&&m,i._evt.emit(a?"valid":"invalid",e,n,u),a):void i._pending++}var tt=e("moment/2.6.0/moment"),nt=e("events/1.0.1/events").EventEmitter,rt={isEmail:q,isUrl:Z,isNumber:g,isTel:C,isColor:I,isDate:z,isDateTime:A,isDateTimeLocal:P,isMonth:E,isWeek:S,isTime:N,isMobile:B},it={text:"text",password:"password",email:"email",radio:"radio",checkbox:"checkbox","select-one":"select-one","select-multiple":"select-multiple",hidden:"hidden",search:"search",textarea:"textarea",file:"file",number:"number",range:"range",date:"date",week:"week",month:"month",time:"time",datetime:"datetime","datetime-local":"datetime-local",url:"url",tel:"tel",color:"color",submit:"submit",button:"button",reset:"reset",image:"image",fieldset:"fieldset",legend:"legend"},at=/^\d{4,}\-\d{2}$/,ot=/^\d{2}:\d{2}:\d{2}$/,ut=/^\d{4,}\-\d{2}\-\d{2}$/,dt=/^\d{4,}\-\d\d\-\d\dT\d\d:\d\d:\d\d(?:[+-]\d\d:\d\d)?Z?$/,mt=/^\d{4,}\-\d\d\-\d\dT\d\d:\d\d:\d\d(?:[+-]\d\d:\d\d)?Z?$/,ct=/^\d{4,}-W\d{2}$/,st=/^https?:\/\/(?:[\w.-]*(?::[^@]+)?@)?(?:[\w-]+\.){1,3}[\w]+(?::\d+)?(?:\/.*)?$/,lt=/^\w+(?:[\._+\-]\w+)*@\w+(?:\.\w+)+$/,ft=/^(?:13[0-9]|14[57]|15[0-35-9]|170|18[0-9])\d{8}$/,pt=/^(?:\(\+\d{2}\))?\d{3,4}\-\d{7,8}$/,vt=/^#[0-9a-fA-F]{6}$/,ht={txt:"text/plain",htm:"text/html",html:"text/html",js:"application/javascript",css:"text/css",csv:"text/csv",xml:"text/xml",jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",gif:"image/gif",pdf:"application/pdf",doc:"application/msword",docx:"application/msword",zip:"application/zip",mp3:"audio/mpeg",ogg:"audio/ogg"},gt=function(e){this._rules=e,this._evt=new nt,this._pending=0,this._certified=!0};gt.prototype.validate=function(e){var t=!0,n=this;return s(this._rules,function(r,i){var a=e[r],o=et(r,i,a,e,n);t=t&&o}),0===this._pending&&(n._evt.emit("complete",t),n._certified=!0),this},gt.prototype.on=function(e,t){return this._evt.on(e,t),this},gt.prototype.off=function(e,t){return m(t)?this._evt.removeListener(e,t):this._evt.removeAllListeners(e),this},gt.rule=function(e,t){return i(e)?m(t)?(rt[e]=t,!0):rt[e]:!1},n.exports=gt});